/*
 * Install the Generative AI SDK
 *
 * $ npm install @google/generative-ai
 *
 * See the getting started guide for more information
 * https://ai.google.dev/gemini-api/docs/get-started/node
 */

import { GEMENI } from "@/constants/API";

const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = GEMENI;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };

  export  const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
   history: [
    {
      role: "user",
      parts: [
        {text: "Generate Travel Plan from kolkata to Russia.\nTravel date - 2024-08-20 to  2024-08-24. Traveler details - Friends , total number of person 4 , with a Luxury budget .\nCreate a Json that includes travel mode as flight or train. travel mode details ( flight Price with Booking url,cost in INR, date , time ) share round trip details .\n Hotel options , with details - hotelName , address , price , rating , amenity .\nCreate a day wise plan to visit place , best time to visit , ticket price , placeName, place details , geo Coordinates , and duration(time required to visit). "},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"travel_details\": {\n    \"mode\": \"flight\",\n    \"round_trip\": {\n      \"departure\": {\n        \"date\": \"2024-08-20\",\n        \"time\": \"10:00\",\n        \"flight_details\": {\n          \"airline\": \"Emirates\",\n          \"flight_number\": \"EK518\",\n          \"booking_url\": \"https://www.emirates.com/\",\n          \"price\": 150000,\n          \"currency\": \"INR\"\n        }\n      },\n      \"return\": {\n        \"date\": \"2024-08-24\",\n        \"time\": \"18:00\",\n        \"flight_details\": {\n          \"airline\": \"Aeroflot\",\n          \"flight_number\": \"SU203\",\n          \"booking_url\": \"https://www.aeroflot.com/\",\n          \"price\": 130000,\n          \"currency\": \"INR\"\n        }\n      }\n    }\n  },\n  \"hotel_options\": [\n    {\n      \"hotelName\": \"Four Seasons Hotel Moscow\",\n      \"address\": \"Okhotny Ryad, 2, Moscow, Russia, 125009\",\n      \"price\": 40000,\n      \"rating\": 4.8,\n      \"amenity\": [\n        \"Indoor pool\",\n        \"Spa\",\n        \"Fine dining restaurants\",\n        \"Fitness center\",\n        \"Concierge service\"\n      ]\n    },\n    {\n      \"hotelName\": \"Ritz-Carlton, Moscow\",\n      \"address\": \"Tverskaya ulitsa, 16, Moscow, Russia, 125009\",\n      \"price\": 35000,\n      \"rating\": 4.7,\n      \"amenity\": [\n        \"Outdoor pool\",\n        \"Spa\",\n        \"Fine dining restaurants\",\n        \"Fitness center\",\n        \"Concierge service\"\n      ]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"date\": \"2024-08-20\",\n      \"activities\": [\n        {\n          \"placeName\": \"Red Square\",\n          \"placeDetails\": \"Iconic historical square, home to St. Basil's Cathedral and Lenin's Mausoleum\",\n          \"bestTime\": \"Morning\",\n          \"ticketPrice\": \"Free\",\n          \"geoCoordinates\": \"55.7539, 37.6208\",\n          \"duration\": \"3 hours\"\n        },\n        {\n          \"placeName\": \"St. Basil's Cathedral\",\n          \"placeDetails\": \"Colorful onion-domed church, a symbol of Moscow\",\n          \"bestTime\": \"Morning\",\n          \"ticketPrice\": \"700 RUB\",\n          \"geoCoordinates\": \"55.7539, 37.6208\",\n          \"duration\": \"2 hours\"\n        },\n        {\n          \"placeName\": \"GUM Department Store\",\n          \"placeDetails\": \"Luxury shopping mall, housed in a historic building on Red Square\",\n          \"bestTime\": \"Afternoon\",\n          \"ticketPrice\": \"Free\",\n          \"geoCoordinates\": \"55.7548, 37.6190\",\n          \"duration\": \"2 hours\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"date\": \"2024-08-21\",\n      \"activities\": [\n        {\n          \"placeName\": \"Kremlin\",\n          \"placeDetails\": \"Historic fortress, home to palaces, cathedrals, and museums\",\n          \"bestTime\": \"Morning\",\n          \"ticketPrice\": \"500 RUB\",\n          \"geoCoordinates\": \"55.7522, 37.6201\",\n          \"duration\": \"4 hours\"\n        },\n        {\n          \"placeName\": \"Tretyakov Gallery\",\n          \"placeDetails\": \"Art museum showcasing Russian art from the 10th to 20th centuries\",\n          \"bestTime\": \"Afternoon\",\n          \"ticketPrice\": \"500 RUB\",\n          \"geoCoordinates\": \"55.7456, 37.6085\",\n          \"duration\": \"3 hours\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"date\": \"2024-08-22\",\n      \"activities\": [\n        {\n          \"placeName\": \"Moscow Metro\",\n          \"placeDetails\": \"Underground railway system known for its architectural beauty\",\n          \"bestTime\": \"Any time\",\n          \"ticketPrice\": \"55 RUB\",\n          \"geoCoordinates\": \"55.7522, 37.6201\",\n          \"duration\": \"2 hours\"\n        },\n        {\n          \"placeName\": \"VDNKh\",\n          \"placeDetails\": \"Large park and exhibition center, featuring pavilions, fountains, and gardens\",\n          \"bestTime\": \"Afternoon\",\n          \"ticketPrice\": \"Free\",\n          \"geoCoordinates\": \"55.8270, 37.6182\",\n          \"duration\": \"4 hours\"\n        }\n      ]\n    },\n    \"day4\": {\n      \"date\": \"2024-08-23\",\n      \"activities\": [\n        {\n          \"placeName\": \"Kolomenskoye\",\n          \"placeDetails\": \"Historic estate with wooden churches, palaces, and a park\",\n          \"bestTime\": \"Morning\",\n          \"ticketPrice\": \"300 RUB\",\n          \"geoCoordinates\": \"55.6636, 37.6744\",\n          \"duration\": \"3 hours\"\n        },\n        {\n          \"placeName\": \"Izmailovo Kremlin\",\n          \"placeDetails\": \"Traditional Russian village with craft workshops, shops, and restaurants\",\n          \"bestTime\": \"Afternoon\",\n          \"ticketPrice\": \"Free\",\n          \"geoCoordinates\": \"55.7931, 37.7589\",\n          \"duration\": \"2 hours\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Please note:**\n\n* This is a sample plan and can be customized based on your preferences.\n* Flight prices and hotel prices are approximate and can vary depending on the time of booking.\n* Entry fees and ticket prices are subject to change.\n* It's recommended to book flights and hotels in advance, especially for peak season travel.\n* You can find more detailed information about the attractions on the official websites or travel guides. \n* Make sure to check the latest travel guidelines and restrictions for Russia before your trip.\n"},
      ],
    },
    {
      role: "user",
      parts: [
        {text: "In below format :\n// Interface for individual activity details\ninterface Activity {\n    ticketPrice: number;\n    placeDetails: string;\n    placeName: string; \n    address:string;\n    duration:string\n    bestTime: string; // Morning | Afternoon | evening | daytime\n  }\n  \n  // Interface for hotel options\n  interface HotelOption {\n    hotelName: string;\n    address: string;\n    price: number;\n    rating: number;\n  }\n  \n  // Interface for flight details\n  interface FlightDetails {\n    departureDate: string;\n    price: number;\n    flightNumber: string;\n    arrivalTime: string;\n    airline: string;\n    bookingUrl: string;\n    departureTime: string;\n    arrivalDate: string;\n  }\n  \n  // Interface for an itinerary day\n  interface ItineraryDay {\n    day: string;\n    activities: Activity[];\n  }\n  \n  // Interface for the main plan\n  interface Plan {\n    travelDate: string;\n    travelers: number;\n    returnDate: string;\n    itinerary: ItineraryDay[];\n    hotel: HotelOption[];\n    budget: string;\n    goingFlight: FlightDetails;\n    returnFlight: FlightDetails;\n  }\n  \n  // Main interface for the travel data\n   interface TravelData {\n    plan: Plan;\n    travelerType: string;\n    destination: string;\n    source: string;\n  }\n  "},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"plan\": {\n    \"travelDate\": \"2024-08-20\",\n    \"travelers\": 4,\n    \"returnDate\": \"2024-08-24\",\n    \"itinerary\": [\n      {\n        \"day\": \"2024-08-20\",\n        \"activities\": [\n          {\n            \"ticketPrice\": 0,\n            \"placeDetails\": \"Iconic historical square, home to St. Basil's Cathedral and Lenin's Mausoleum\",\n            \"placeName\": \"Red Square\",\n            \"address\": \"Red Square, Moscow, Russia\",\n            \"duration\": \"3 hours\",\n            \"bestTime\": \"Morning\"\n          },\n          {\n            \"ticketPrice\": 700,\n            \"placeDetails\": \"Colorful onion-domed church, a symbol of Moscow\",\n            \"placeName\": \"St. Basil's Cathedral\",\n            \"address\": \"Red Square, Moscow, Russia\",\n            \"duration\": \"2 hours\",\n            \"bestTime\": \"Morning\"\n          },\n          {\n            \"ticketPrice\": 0,\n            \"placeDetails\": \"Luxury shopping mall, housed in a historic building on Red Square\",\n            \"placeName\": \"GUM Department Store\",\n            \"address\": \"Red Square, Moscow, Russia\",\n            \"duration\": \"2 hours\",\n            \"bestTime\": \"Afternoon\"\n          }\n        ]\n      },\n      {\n        \"day\": \"2024-08-21\",\n        \"activities\": [\n          {\n            \"ticketPrice\": 500,\n            \"placeDetails\": \"Historic fortress, home to palaces, cathedrals, and museums\",\n            \"placeName\": \"Kremlin\",\n            \"address\": \"Moscow Kremlin, Moscow, Russia\",\n            \"duration\": \"4 hours\",\n            \"bestTime\": \"Morning\"\n          },\n          {\n            \"ticketPrice\": 500,\n            \"placeDetails\": \"Art museum showcasing Russian art from the 10th to 20th centuries\",\n            \"placeName\": \"Tretyakov Gallery\",\n            \"address\": \"Lavrushinsky per., 12, Moscow, Russia\",\n            \"duration\": \"3 hours\",\n            \"bestTime\": \"Afternoon\"\n          }\n        ]\n      },\n      {\n        \"day\": \"2024-08-22\",\n        \"activities\": [\n          {\n            \"ticketPrice\": 55,\n            \"placeDetails\": \"Underground railway system known for its architectural beauty\",\n            \"placeName\": \"Moscow Metro\",\n            \"address\": \"Moscow, Russia\",\n            \"duration\": \"2 hours\",\n            \"bestTime\": \"Daytime\"\n          },\n          {\n            \"ticketPrice\": 0,\n            \"placeDetails\": \"Large park and exhibition center, featuring pavilions, fountains, and gardens\",\n            \"placeName\": \"VDNKh\",\n            \"address\": \"Prospekt Mira, 119, Moscow, Russia\",\n            \"duration\": \"4 hours\",\n            \"bestTime\": \"Afternoon\"\n          }\n        ]\n      },\n      {\n        \"day\": \"2024-08-23\",\n        \"activities\": [\n          {\n            \"ticketPrice\": 300,\n            \"placeDetails\": \"Historic estate with wooden churches, palaces, and a park\",\n            \"placeName\": \"Kolomenskoye\",\n            \"address\": \"Andropova pr-kt, 39, Moscow, Russia\",\n            \"duration\": \"3 hours\",\n            \"bestTime\": \"Morning\"\n          },\n          {\n            \"ticketPrice\": 0,\n            \"placeDetails\": \"Traditional Russian village with craft workshops, shops, and restaurants\",\n            \"placeName\": \"Izmailovo Kremlin\",\n            \"address\": \"Izmailovsky pr-d, 73Zh, Moscow, Russia\",\n            \"duration\": \"2 hours\",\n            \"bestTime\": \"Afternoon\"\n          }\n        ]\n      }\n    ],\n    \"hotel\": [\n      {\n        \"hotelName\": \"Four Seasons Hotel Moscow\",\n        \"address\": \"Okhotny Ryad, 2, Moscow, Russia, 125009\",\n        \"price\": 40000,\n        \"rating\": 4.8\n      },\n      {\n        \"hotelName\": \"Ritz-Carlton, Moscow\",\n        \"address\": \"Tverskaya ulitsa, 16, Moscow, Russia, 125009\",\n        \"price\": 35000,\n        \"rating\": 4.7\n      }\n    ],\n    \"budget\": \"Luxury\",\n    \"goingFlight\": {\n      \"departureDate\": \"2024-08-20\",\n      \"price\": 150000,\n      \"flightNumber\": \"EK518\",\n      \"arrivalTime\": \"18:00\",\n      \"airline\": \"Emirates\",\n      \"bookingUrl\": \"https://www.emirates.com/\",\n      \"departureTime\": \"10:00\",\n      \"arrivalDate\": \"2024-08-20\"\n    },\n    \"returnFlight\": {\n      \"departureDate\": \"2024-08-24\",\n      \"price\": 130000,\n      \"flightNumber\": \"SU203\",\n      \"arrivalTime\": \"10:00\",\n      \"airline\": \"Aeroflot\",\n      \"bookingUrl\": \"https://www.aeroflot.com/\",\n      \"departureTime\": \"18:00\",\n      \"arrivalDate\": \"2024-08-25\"\n    }\n  },\n  \"travelerType\": \"Friends\",\n  \"destination\": \"Russia\",\n  \"source\": \"Kolkata\"\n}\n```\n\n**Explanation of the JSON Structure:**\n\n* **TravelData**: This is the main object representing the entire travel data.\n    * **plan**: An object containing detailed information about the travel plan.\n        * **travelDate**: The start date of the trip.\n        * **travelers**: Number of travelers.\n        * **returnDate**: The return date of the trip.\n        * **itinerary**: An array of objects representing the daily itinerary.\n            * **day**: The date of the day in the itinerary.\n            * **activities**: An array of objects representing the activities planned for that day.\n                * **ticketPrice**: The cost of the ticket (in RUB).\n                * **placeDetails**: A description of the place.\n                * **placeName**: The name of the place.\n                * **address**: Address of the place.\n                * **duration**: The estimated time required to visit the place.\n                * **bestTime**: The best time of day to visit the place.\n        * **hotel**: An array of hotel options with their names, addresses, prices, and ratings.\n        * **budget**: The budget level of the trip (e.g., \"Luxury\").\n        * **goingFlight**: An object containing details of the outbound flight.\n        * **returnFlight**: An object containing details of the return flight.\n    * **travelerType**: The type of traveler (e.g., \"Friends\").\n    * **destination**: The destination city or country.\n    * **source**: The source city or country.\n\nThis JSON structure provides a well-organized and comprehensive representation of the travel plan, making it easy to understand and use.\n\n**Remember:** \n* Adjust the data within the JSON to match your actual travel plan.\n* Consider using a JSON parser or validator to ensure the data is formatted correctly.\n"},
      ],
    },
  ],
});
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
 